"use strict";!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],n):n(e.d3_interpolate=e.d3_interpolate||{},e.d3_color)}(this,function(e,n){function t(e){return function(){return e}}function r(e,n){return function(t){return e+t*n}}function a(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(r){return Math.pow(e+r*n,t)}}function f(e,n){var a=n-e;return a?r(e,a>180||-180>a?a-360*Math.round(a/360):a):t(isNaN(e)?n:e)}function c(e){return 1==(e=+e)?u:function(n,r){return r-n?a(n,r,e):t(isNaN(n)?r:n)}}function u(e,n){var a=n-e;return a?r(e,a):t(isNaN(e)?n:e)}function o(e,n){var t,r=[],a=[],f=e?e.length:0,c=n?n.length:0,u=Math.min(f,c);for(t=0;u>t;++t)r.push(h(e[t],n[t]));for(;f>t;++t)a[t]=e[t];for(;c>t;++t)a[t]=n[t];return function(e){for(t=0;u>t;++t)a[t]=r[t](e);return a}}function i(e,n){return e=+e,n-=e,function(t){return e+n*t}}function l(e,n){var t,r={},a={};null!==e&&"object"==typeof e||(e={}),null!==n&&"object"==typeof n||(n={});for(t in e)t in n?r[t]=h(e[t],n[t]):a[t]=e[t];for(t in n)t in e||(a[t]=n[t]);return function(e){for(t in r)a[t]=r[t](e);return a}}function d(e){return function(){return e}}function s(e){return function(n){return e(n)+""}}function b(e,n){var t,r,a,f=E.lastIndex=R.lastIndex=0,c=-1,u=[],o=[];for(e+="",n+="";(t=E.exec(e))&&(r=R.exec(n));)(a=r.index)>f&&(a=n.slice(f,a),u[c]?u[c]+=a:u[++c]=a),(t=t[0])===(r=r[0])?u[c]?u[c]+=r:u[++c]=r:(u[++c]=null,o.push({i:c,x:i(t,r)})),f=R.lastIndex;return f<n.length&&(a=n.slice(f),u[c]?u[c]+=a:u[++c]=a),u.length<2?o[0]?s(o[0].x):d(n):(n=o.length,function(e){for(var t,r=0;n>r;++r)u[(t=o[r]).i]=t.x(e);return u.join("")})}function h(e,r){var a,f=typeof r;return null==r||"boolean"===f?t(r):("number"===f?i:"string"===f?(a=n.color(r))?(r=a,q):b:r instanceof n.color?q:Array.isArray(r)?o:l)(e,r)}function p(e,n){return e=+e,n-=e,function(t){return Math.round(e+n*t)}}function g(e,n,t,r,a,f){if(e*r==n*t)return null;var c=Math.sqrt(e*e+n*n);e/=c,n/=c;var u=e*t+n*r;t-=e*u,r-=n*u;var o=Math.sqrt(t*t+r*r);return t/=o,r/=o,u/=o,n*t>e*r&&(e=-e,n=-n,u=-u,c=-c),{translateX:a,translateY:f,rotate:Math.atan2(n,e)*C,skewX:Math.atan(u)*C,scaleX:c,scaleY:o}}function m(e){if("none"===e)return S;j||(j=document.createElement("DIV"),P=document.documentElement,F=document.defaultView),j.style.transform=e,e=F.getComputedStyle(P.appendChild(j),null).getPropertyValue("transform"),P.removeChild(j);var n=e.slice(7,-1).split(",");return g(+n[0],+n[1],+n[2],+n[3],+n[4],+n[5])}function v(e){B||(B=document.createElementNS("http://www.w3.org/2000/svg","g")),B.setAttribute("transform",null==e?"":e);var n=B.transform.baseVal.consolidate().matrix;return g(n.a,n.b,n.c,n.d,n.e,n.f)}function y(e,n,t,r){function a(e){return e.length?e.pop()+" ":""}function f(e,r,a,f,c,u){if(e!==a||r!==f){var o=c.push("translate(",null,n,null,t);u.push({i:o-4,x:i(e,a)},{i:o-2,x:i(r,f)})}else(a||f)&&c.push("translate("+a+n+f+t)}function c(e,n,t,f){e!==n?(e-n>180?n+=360:n-e>180&&(e+=360),f.push({i:t.push(a(t)+"rotate(",null,r)-2,x:i(e,n)})):n&&t.push(a(t)+"rotate("+n+r)}function u(e,n,t,f){e!==n?f.push({i:t.push(a(t)+"skewX(",null,r)-2,x:i(e,n)}):n&&t.push(a(t)+"skewX("+n+r)}function o(e,n,t,r,f,c){if(e!==t||n!==r){var u=f.push(a(f)+"scale(",null,",",null,")");c.push({i:u-4,x:i(e,t)},{i:u-2,x:i(n,r)})}else 1===t&&1===r||f.push(a(f)+"scale("+t+","+r+")")}return function(n,t){var r=[],a=[];return n=e(n),t=e(t),f(n.translateX,n.translateY,t.translateX,t.translateY,r,a),c(n.rotate,t.rotate,r,a),u(n.skewX,t.skewX,r,a),o(n.scaleX,n.scaleY,t.scaleX,t.scaleY,r,a),n=t=null,function(e){for(var n,t=-1,f=a.length;++t<f;)r[(n=a[t]).i]=n.x(e);return r.join("")}}}function w(e){return((e=Math.exp(e))+1/e)/2}function M(e){return((e=Math.exp(e))-1/e)/2}function x(e){return((e=Math.exp(2*e))-1)/(e+1)}function _(e,n){var t,r,a=e[0],f=e[1],c=e[2],u=n[0],o=n[1],i=n[2],l=u-a,d=o-f,s=l*l+d*d;if(T>s)r=Math.log(i/c)/Y,t=function(e){return[a+e*l,f+e*d,c*Math.exp(Y*e*r)]};else{var b=Math.sqrt(s),h=(i*i-c*c+X*s)/(2*c*$*b),p=(i*i-c*c-X*s)/(2*i*$*b),g=Math.log(Math.sqrt(h*h+1)-h),m=Math.log(Math.sqrt(p*p+1)-p);r=(m-g)/Y,t=function(e){var n=e*r,t=w(g),u=c/($*b)*(t*x(Y*n+g)-M(g));return[a+u*l,f+u*d,c*t/w(Y*n+g)]}}return t.duration=1e3*r,t}function k(e,t){var r=f((e=n.hsl(e)).h,(t=n.hsl(t)).h),a=u(e.s,t.s),c=u(e.l,t.l),o=u(e.opacity,t.opacity);return function(n){return e.h=r(n),e.s=a(n),e.l=c(n),e.opacity=o(n),e+""}}function N(e,t){var r=u((e=n.hsl(e)).h,(t=n.hsl(t)).h),a=u(e.s,t.s),f=u(e.l,t.l),c=u(e.opacity,t.opacity);return function(n){return e.h=r(n),e.s=a(n),e.l=f(n),e.opacity=c(n),e+""}}function O(e,t){var r=u((e=n.lab(e)).l,(t=n.lab(t)).l),a=u(e.a,t.a),f=u(e.b,t.b),c=u(e.opacity,t.opacity);return function(n){return e.l=r(n),e.a=a(n),e.b=f(n),e.opacity=c(n),e+""}}function L(e,t){var r=f((e=n.hcl(e)).h,(t=n.hcl(t)).h),a=u(e.c,t.c),c=u(e.l,t.l),o=u(e.opacity,t.opacity);return function(n){return e.h=r(n),e.c=a(n),e.l=c(n),e.opacity=o(n),e+""}}function A(e,t){var r=u((e=n.hcl(e)).h,(t=n.hcl(t)).h),a=u(e.c,t.c),f=u(e.l,t.l),c=u(e.opacity,t.opacity);return function(n){return e.h=r(n),e.c=a(n),e.l=f(n),e.opacity=c(n),e+""}}var j,P,F,B,q=function e(t){function r(e,t){var r=a((e=n.rgb(e)).r,(t=n.rgb(t)).r),f=a(e.g,t.g),c=a(e.b,t.b),u=a(e.opacity,t.opacity);return function(n){return e.r=r(n),e.g=f(n),e.b=c(n),e.opacity=u(n),e+""}}var a=c(t);return r.gamma=e,r}(1),E=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R=new RegExp(E.source,"g"),C=180/Math.PI,S={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},z=y(m,"px, ","px)","deg)"),I=y(v,", ",")",")"),Y=Math.SQRT2,$=2,X=4,T=1e-12,G=function e(t){function r(e,r){var a=f((e=n.cubehelix(e)).h,(r=n.cubehelix(r)).h),c=u(e.s,r.s),o=u(e.l,r.l),i=u(e.opacity,r.opacity);return function(n){return e.h=a(n),e.s=c(n),e.l=o(Math.pow(n,t)),e.opacity=i(n),e+""}}return t=+t,r.gamma=e,r}(1),D=function e(t){function r(e,r){var a=u((e=n.cubehelix(e)).h,(r=n.cubehelix(r)).h),f=u(e.s,r.s),c=u(e.l,r.l),o=u(e.opacity,r.opacity);return function(n){return e.h=a(n),e.s=f(n),e.l=c(Math.pow(n,t)),e.opacity=o(n),e+""}}return t=+t,r.gamma=e,r}(1);e.version="0.7.0",e.interpolate=h,e.interpolateArray=o,e.interpolateNumber=i,e.interpolateObject=l,e.interpolateRound=p,e.interpolateString=b,e.interpolateTransformCss=z,e.interpolateTransformSvg=I,e.interpolateZoom=_,e.interpolateRgb=q,e.interpolateHsl=k,e.interpolateHslLong=N,e.interpolateLab=O,e.interpolateHcl=L,e.interpolateHclLong=A,e.interpolateCubehelix=G,e.interpolateCubehelixLong=D}),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-array"),require("d3-collection"),require("d3-interpolate"),require("d3-format"),require("d3-time"),require("d3-time-format"),require("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-format","d3-time","d3-time-format","d3-color"],n):n(e.d3_scale=e.d3_scale||{},e.d3_array,e.d3_collection,e.d3_interpolate,e.d3_format,e.d3_time,e.d3_time_format,e.d3_color)}(this,function(e,n,t,r,a,f,c,u){function o(){function e(e){var t=e+"",c=n.get(t);if(!c){if(f!==ue)return f;n.set(t,c=r.push(e))}return a[(c-1)%a.length]}var n=t.map(),r=[],a=[],f=ue;return e.domain=function(a){if(!arguments.length)return r.slice();r=[],n=t.map();for(var f,c,u=-1,o=a.length;++u<o;)n.has(c=(f=a[u])+"")||n.set(c,r.push(f));return e},e.range=function(n){return arguments.length?(a=ce.call(n),e):a.slice()},e.unknown=function(n){return arguments.length?(f=n,e):f},e.copy=function(){return o().domain(r).range(a).unknown(f)},e}function i(){function e(){var e=f().length,a=u[1]<u[0],o=u[a-0],i=u[1-a];t=(i-o)/Math.max(1,e-d+2*s),l&&(t=Math.floor(t)),o+=(i-o-t*(e-d))*b,r=t*(1-d),l&&(o=Math.round(o),r=Math.round(r));var h=n.range(e).map(function(e){return o+t*e});return c(a?h.reverse():h)}var t,r,a=o().unknown(void 0),f=a.domain,c=a.range,u=[0,1],l=!1,d=0,s=0,b=.5;return delete a.unknown,a.domain=function(n){return arguments.length?(f(n),e()):f()},a.range=function(n){return arguments.length?(u=[+n[0],+n[1]],e()):u.slice()},a.rangeRound=function(n){return u=[+n[0],+n[1]],l=!0,e()},a.bandwidth=function(){return r},a.step=function(){return t},a.round=function(n){return arguments.length?(l=!!n,e()):l},a.padding=function(n){return arguments.length?(d=s=Math.max(0,Math.min(1,n)),e()):d},a.paddingInner=function(n){return arguments.length?(d=Math.max(0,Math.min(1,n)),e()):d},a.paddingOuter=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),e()):s},a.align=function(n){return arguments.length?(b=Math.max(0,Math.min(1,n)),e()):b},a.copy=function(){return i().domain(f()).range(u).round(l).paddingInner(d).paddingOuter(s).align(b)},e()}function l(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return l(n())},e}function d(){return l(i().paddingInner(1))}function s(e){return function(){return e}}function b(e){return+e}function h(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:s(n)}function p(e){return function(n,t){var r=e(n=+n,t=+t);return function(e){return n>=e?0:e>=t?1:r(e)}}}function g(e){return function(n,t){var r=e(n=+n,t=+t);return function(e){return 0>=e?n:e>=1?t:r(e)}}}function m(e,n,t,r){var a=e[0],f=e[1],c=n[0],u=n[1];return a>f?(a=t(f,a),c=r(u,c)):(a=t(a,f),c=r(c,u)),function(e){return c(a(e))}}function v(e,t,r,a){var f=Math.min(e.length,t.length)-1,c=new Array(f),u=new Array(f),o=-1;for(e[f]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<f;)c[o]=r(e[o],e[o+1]),u[o]=a(t[o],t[o+1]);return function(t){var r=n.bisect(e,t,1,f)-1;return u[r](c[r](t))}}function y(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function w(e,n){function t(){var t=Math.min(u.length,o.length)>2?v:m;return f=t(u,o,l?p(e):e,i),c=t(o,u,h,l?g(n):n),a}function a(e){return f(+e)}var f,c,u=oe,o=oe,i=r.interpolate,l=!1;return a.invert=function(e){return c(+e)},a.domain=function(e){return arguments.length?(u=fe.call(e,b),t()):u.slice()},a.range=function(e){return arguments.length?(o=ce.call(e),t()):o.slice()},a.rangeRound=function(e){return o=ce.call(e),i=r.interpolateRound,t()},a.clamp=function(e){return arguments.length?(l=!!e,t()):l},a.interpolate=function(e){return arguments.length?(i=e,t()):i},t()}function M(e,t,r){var f,c=e[0],u=e[e.length-1],o=n.tickStep(c,u,null==t?10:t);switch(r=a.formatSpecifier(null==r?",f":r),r.type){case"s":var i=Math.max(Math.abs(c),Math.abs(u));return null!=r.precision||isNaN(f=a.precisionPrefix(o,i))||(r.precision=f),a.formatPrefix(r,i);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(f=a.precisionRound(o,Math.max(Math.abs(c),Math.abs(u))))||(r.precision=f-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(f=a.precisionFixed(o))||(r.precision=f-2*("%"===r.type))}return a.format(r)}function x(e){var t=e.domain;return e.ticks=function(e){var r=t();return n.ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,n){return M(t(),e,n)},e.nice=function(r){var a=t(),f=a.length-1,c=null==r?10:r,u=a[0],o=a[f],i=n.tickStep(u,o,c);return i&&(i=n.tickStep(Math.floor(u/i)*i,Math.ceil(o/i)*i,c),a[0]=Math.floor(u/i)*i,a[f]=Math.ceil(o/i)*i,t(a)),e},e}function _(){var e=w(h,r.interpolateNumber);return e.copy=function(){return y(e,_())},x(e)}function k(){function e(e){return+e}var n=[0,1];return e.invert=e,e.domain=e.range=function(t){return arguments.length?(n=fe.call(t,b),e):n.slice()},e.copy=function(){return k().domain(n)},x(e)}function N(e,n){e=e.slice();var t,r=0,a=e.length-1,f=e[r],c=e[a];return f>c&&(t=r,r=a,a=t,t=f,f=c,c=t),e[r]=n.floor(f),e[a]=n.ceil(c),e}function O(e,n){return(n=Math.log(n/e))?function(t){return Math.log(t/e)/n}:s(n)}function L(e,n){return 0>e?function(t){return-Math.pow(-n,t)*Math.pow(-e,1-t)}:function(t){return Math.pow(n,t)*Math.pow(e,1-t)}}function A(e){return isFinite(e)?+("1e"+e):0>e?0:e}function j(e){return 10===e?A:e===Math.E?Math.exp:function(n){return Math.pow(e,n)}}function P(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(n){return Math.log(n)/e})}function F(e){return function(n){return-e(-n)}}function B(){function e(){return c=P(f),u=j(f),r()[0]<0&&(c=F(c),u=F(u)),t}var t=w(O,L).domain([1,10]),r=t.domain,f=10,c=P(10),u=j(10);return t.base=function(n){return arguments.length?(f=+n,e()):f},t.domain=function(n){return arguments.length?(r(n),e()):r()},t.ticks=function(e){var t,a=r(),o=a[0],i=a[a.length-1];(t=o>i)&&(b=o,o=i,i=b);var l,d,s,b=c(o),h=c(i),p=null==e?10:+e,g=[];if(!(f%1)&&p>h-b){if(b=Math.round(b)-1,h=Math.round(h)+1,o>0){for(;h>b;++b)for(d=1,l=u(b);f>d;++d)if(s=l*d,!(o>s)){if(s>i)break;g.push(s)}}else for(;h>b;++b)for(d=f-1,l=u(b);d>=1;--d)if(s=l*d,!(o>s)){if(s>i)break;g.push(s)}t&&g.reverse()}else g=n.ticks(b,h,Math.min(h-b,p)).map(u);return g},t.tickFormat=function(e,n){if(null==n&&(n=10===f?".0e":","),"function"!=typeof n&&(n=a.format(n)),e===1/0)return n;null==e&&(e=10);var r=Math.max(1,f*e/t.ticks().length);return function(e){var t=e/u(Math.round(c(e)));return f-.5>t*f&&(t*=f),r>=t?n(e):""}},t.nice=function(){return r(N(r(),{floor:function(e){return u(Math.floor(c(e)))},ceil:function(e){return u(Math.ceil(c(e)))}}))},t.copy=function(){return y(t,B().base(f))},t}function q(e,n){return 0>e?-Math.pow(-e,n):Math.pow(e,n)}function E(){function e(e,n){return(n=q(n,t)-(e=q(e,t)))?function(r){return(q(r,t)-e)/n}:s(n)}function n(e,n){return n=q(n,t)-(e=q(e,t)),function(r){return q(e+n*r,1/t)}}var t=1,r=w(e,n),a=r.domain;return r.exponent=function(e){return arguments.length?(t=+e,a(a())):t},r.copy=function(){return y(r,E().exponent(t))},x(r)}function R(){return E().exponent(.5)}function C(){function e(){var e=0,c=Math.max(1,a.length);for(f=new Array(c-1);++e<c;)f[e-1]=n.quantile(r,e/c);return t}function t(e){return isNaN(e=+e)?void 0:a[n.bisect(f,e)]}var r=[],a=[],f=[];return t.invertExtent=function(e){var n=a.indexOf(e);return 0>n?[NaN,NaN]:[n>0?f[n-1]:r[0],n<f.length?f[n]:r[r.length-1]]},t.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var a,f=0,c=t.length;c>f;++f)null==(a=t[f])||isNaN(a=+a)||r.push(a);return r.sort(n.ascending),e()},t.range=function(n){return arguments.length?(a=ce.call(n),e()):a.slice()},t.quantiles=function(){return f.slice()},t.copy=function(){return C().domain(r).range(a)},t}function S(){function e(e){return e>=e?u[n.bisect(c,e,0,f)]:void 0}function t(){var n=-1;for(c=new Array(f);++n<f;)c[n]=((n+1)*a-(n-f)*r)/(f+1);return e}var r=0,a=1,f=1,c=[.5],u=[0,1];return e.domain=function(e){return arguments.length?(r=+e[0],a=+e[1],t()):[r,a]},e.range=function(e){return arguments.length?(f=(u=ce.call(e)).length-1,t()):u.slice()},e.invertExtent=function(e){var n=u.indexOf(e);return 0>n?[NaN,NaN]:1>n?[r,c[0]]:n>=f?[c[f-1],a]:[c[n-1],c[n]]},e.copy=function(){return S().domain([r,a]).range(u)},x(e)}function z(){function e(e){return e>=e?r[n.bisect(t,e,0,a)]:void 0}var t=[.5],r=[0,1],a=1;return e.domain=function(n){return arguments.length?(t=ce.call(n),a=Math.min(t.length,r.length-1),e):t.slice()},e.range=function(n){return arguments.length?(r=ce.call(n),a=Math.min(t.length,r.length-1),e):r.slice()},e.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},e.copy=function(){return z().domain(t).range(r)},e}function I(e){return new Date(e)}function Y(e,t,a,f,c,u,o,i,l){function d(n){return(o(n)<n?m:u(n)<n?v:c(n)<n?M:f(n)<n?x:t(n)<n?a(n)<n?_:k:e(n)<n?O:L)(n)}function s(t,r,a,f){if(null==t&&(t=10),"number"==typeof t){var c=Math.abs(a-r)/t,u=n.bisector(function(e){return e[2]}).right(A,c);u===A.length?(f=n.tickStep(r/pe,a/pe,t),t=e):u?(u=A[c/A[u-1][2]<A[u][2]/c?u-1:u],f=u[1],t=u[0]):(f=n.tickStep(r,a,t),t=i)}return null==f?t:t.every(f)}var b=w(h,r.interpolateNumber),p=b.invert,g=b.domain,m=l(".%L"),v=l(":%S"),M=l("%I:%M"),x=l("%I %p"),_=l("%a %d"),k=l("%b %d"),O=l("%B"),L=l("%Y"),A=[[o,1,ie],[o,5,5*ie],[o,15,15*ie],[o,30,30*ie],[u,1,le],[u,5,5*le],[u,15,15*le],[u,30,30*le],[c,1,de],[c,3,3*de],[c,6,6*de],[c,12,12*de],[f,1,se],[f,2,2*se],[a,1,be],[t,1,he],[t,3,3*he],[e,1,pe]];return b.invert=function(e){return new Date(p(e))},b.domain=function(e){return arguments.length?g(e):g().map(I)},b.ticks=function(e,n){var t,r=g(),a=r[0],f=r[r.length-1],c=a>f;return c&&(t=a,a=f,f=t),t=s(e,a,f,n),t=t?t.range(a,f+1):[],c?t.reverse():t},b.tickFormat=function(e){return null==e?d:l(e)},b.nice=function(e,n){var t=g();return(e=s(e,t[0],t[t.length-1],n))?g(N(t,e)):b},b.copy=function(){return y(b,Y(e,t,a,f,c,u,o,i,l))},b}function $(){return Y(f.timeYear,f.timeMonth,f.timeWeek,f.timeDay,f.timeHour,f.timeMinute,f.timeSecond,f.timeMillisecond,c.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function X(){return Y(f.utcYear,f.utcMonth,f.utcWeek,f.utcDay,f.utcHour,f.utcMinute,f.utcSecond,f.utcMillisecond,c.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function T(e){return e.match(/.{6}/g).map(function(e){return"#"+e})}function G(){return o().range(ge)}function D(){return o().range(me)}function U(){return o().range(ve)}function V(){return o().range(ye)}function Z(){return _().interpolate(r.interpolateCubehelixLong).range([u.cubehelix(300,.5,0),u.cubehelix(-240,.5,1)])}function H(e){function n(n){var f=(n-t)/(r-t);return e(a?Math.max(0,Math.min(1,f)):f)}var t=0,r=1,a=!1;return n.domain=function(e){return arguments.length?(t=+e[0],r=+e[1],n):[t,r]},n.clamp=function(e){return arguments.length?(a=!!e,n):a},n.copy=function(){return H(e).domain([t,r]).clamp(a)},x(n)}function K(){return H(r.interpolateCubehelixLong(u.cubehelix(-100,.75,.35),u.cubehelix(80,1.5,.8)))}function Q(){return H(r.interpolateCubehelixLong(u.cubehelix(260,.75,.35),u.cubehelix(80,1.5,.8)))}function W(){var e=u.cubehelix();return H(function(n){(0>n||n>1)&&(n-=Math.floor(n));var t=Math.abs(n-.5);return e.h=360*n-100,e.s=1.5-1.5*t,e.l=.8-.9*t,e+""})}function J(e){var n=H(function(n){return e[Math.round(n*e.length-n)]}).clamp(!0);return delete n.clamp,n}function ee(){return J(we)}function ne(){return J(Me)}function te(){return J(xe)}function re(){return J(_e)}var ae=Array.prototype,fe=ae.map,ce=ae.slice,ue={name:"implicit"},oe=[0,1],ie=1e3,le=60*ie,de=60*le,se=24*de,be=7*se,he=30*se,pe=365*se,ge=T("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),me=T("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),ve=T("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ye=T("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),we=T("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"),Me=T("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"),xe=T("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"),_e=T("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921");e.version="0.6.4",e.scaleBand=i,e.scalePoint=d,e.scaleIdentity=k,e.scaleLinear=_,e.scaleLog=B,e.scaleOrdinal=o,e.scaleImplicit=ue,e.scalePow=E,e.scaleSqrt=R,e.scaleQuantile=C,e.scaleQuantize=S,e.scaleThreshold=z,e.scaleTime=$,e.scaleUtc=X,e.scaleCategory10=G,e.scaleCategory20b=D,e.scaleCategory20c=U,e.scaleCategory20=V,e.scaleCubehelix=Z,e.scaleRainbow=W,e.scaleWarm=K,e.scaleCool=Q,e.scaleViridis=ee,e.scaleMagma=ne,e.scaleInferno=te,e.scalePlasma=re}),function(){var e,n,t,r,a,f,c,u,o,i,l,d,s,b,h,p,g,m,v,y,w,M,x,_,k,N,O,L,A,j,P,F,B,q,E,R,C,S,z,I,Y,$,X,T,G,D,U,V,Z,H,K,Q,W,J,ee,ne,te,re,ae,fe,ce,ue,oe,ie,le,de,se,be,he,pe,ge,ve,ye,we,Me,xe,_e,ke,Ne,Oe,Le,Ae,je=[].slice;ke=function(){var e,n,t,r,a;for(e={},a="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,n=a.length;r<n;r++)t=a[r],e["[object "+t+"]"]=t.toLowerCase();return function(n){var t;return t=Object.prototype.toString.call(n),e[t]||"object"}}(),U=function(e,n,t){return null==n&&(n=0),null==t&&(t=1),e<n&&(e=n),e>t&&(e=t),e},Ne=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},w=function(e){var n,t;for(e._clipped=!1,e._unclipped=e.slice(0),n=t=0;t<3;n=++t)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]<0&&(e[n]=0),e[n]>255&&(e[n]=255)):3===n&&(e[n]<0&&(e[n]=0),e[n]>1&&(e[n]=1));return e._clipped||delete e._unclipped,e},r=Math.PI,ye=Math.round,x=Math.cos,L=Math.floor,ne=Math.pow,V=Math.log,Me=Math.sin,xe=Math.sqrt,b=Math.atan2,K=Math.max,s=Math.abs,c=2*r,a=r/3,n=r/180,f=180/r,y=function(){return arguments[0]instanceof e?arguments[0]:function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,arguments,function(){})},y.default=y,d=[],"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=y),"function"==typeof define&&define.amd?define([],function(){return y}):(ve="undefined"!=typeof exports&&null!==exports?exports:this,ve.chroma=y),y.version="1.3.7",l={},o=[],i=!1,e=function(){function e(){var e,n,t,r,a,f,c,u,d;for(f=this,n=[],u=0,r=arguments.length;u<r;u++)null!=(e=arguments[u])&&n.push(e);if(n.length>1&&(c=n[n.length-1]),null!=l[c])f._rgb=w(l[c](Ne(n.slice(0,-1))));else{for(i||(o=o.sort(function(e,n){return n.p-e.p}),i=!0),d=0,a=o.length;d<a&&(t=o[d],!(c=t.test.apply(t,n)));d++);c&&(f._rgb=w(l[c].apply(l,n)))}null==f._rgb&&console.warn("unknown format: "+n),null==f._rgb&&(f._rgb=[0,0,0]),3===f._rgb.length&&f._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return y(me._rgb)},e}(),y._input=l,y.brewer=m={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,n;n=[];for(e in m)n.push(m[e.toLowerCase()]=m[e])}(),Oe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",
darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},y.colors=Oe,$=function(){var e,n,r,a,f,c,u,o,i;return n=Ne(arguments),f=n[0],e=n[1],r=n[2],o=(f+16)/116,u=isNaN(e)?o:o+e/500,i=isNaN(r)?o:o-r/200,o=t.Yn*X(o),u=t.Xn*X(u),i=t.Zn*X(i),c=Ae(3.2404542*u-1.5371385*o-.4985314*i),a=Ae(-.969266*u+1.8760108*o+.041556*i),r=Ae(.0556434*u-.2040259*o+1.0572252*i),[c,a,r,n.length>3?n[3]:1]},Ae=function(e){return 255*(e<=.00304?12.92*e:1.055*ne(e,1/2.4)-.055)},X=function(e){return e>t.t1?e*e*e:t.t2*(e-t.t0)},t={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ie=function(){var e,n,t,r,a,f,c,u;return r=Ne(arguments),t=r[0],n=r[1],e=r[2],a=he(t,n,e),f=a[0],c=a[1],u=a[2],[116*c-16,500*(f-c),200*(c-u)]},pe=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Le=function(e){return e>t.t3?ne(e,1/3):e/t.t2+t.t0},he=function(){var e,n,r,a,f,c,u;return a=Ne(arguments),r=a[0],n=a[1],e=a[2],r=pe(r),n=pe(n),e=pe(e),f=Le((.4124564*r+.3575761*n+.1804375*e)/t.Xn),c=Le((.2126729*r+.7151522*n+.072175*e)/t.Yn),u=Le((.0193339*r+.119192*n+.9503041*e)/t.Zn),[f,c,u]},y.lab=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["lab"]),function(){})},l.lab=$,e.prototype.lab=function(){return ie(this._rgb)},h=function(e){var n,t,r,a,f,c,u,o,i,l,d;return e=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(y(a));return r}(),2===e.length?(i=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(a.lab());return r}(),f=i[0],c=i[1],n=function(e){var n,t;return t=function(){var t,r;for(r=[],n=t=0;t<=2;n=++t)r.push(f[n]+e*(c[n]-f[n]));return r}(),y.lab.apply(y,t)}):3===e.length?(l=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(a.lab());return r}(),f=l[0],c=l[1],u=l[2],n=function(e){var n,t;return t=function(){var t,r;for(r=[],n=t=0;t<=2;n=++t)r.push((1-e)*(1-e)*f[n]+2*(1-e)*e*c[n]+e*e*u[n]);return r}(),y.lab.apply(y,t)}):4===e.length?(d=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(a.lab());return r}(),f=d[0],c=d[1],u=d[2],o=d[3],n=function(e){var n,t;return t=function(){var t,r;for(r=[],n=t=0;t<=2;n=++t)r.push((1-e)*(1-e)*(1-e)*f[n]+3*(1-e)*(1-e)*e*c[n]+3*(1-e)*e*e*u[n]+e*e*e*o[n]);return r}(),y.lab.apply(y,t)}):5===e.length&&(t=h(e.slice(0,3)),r=h(e.slice(2,5)),n=function(e){return e<.5?t(2*e):r(2*(e-.5))}),n},y.bezier=function(e){var n;return n=h(e),n.scale=function(){return y.scale(n)},n},y.cubehelix=function(e,n,t,r,a){var f,u,o;return null==e&&(e=300),null==n&&(n=-1.5),null==t&&(t=1),null==r&&(r=1),null==a&&(a=[0,1]),f=0,"array"===ke(a)?u=a[1]-a[0]:(u=0,a=[a,a]),o=function(o){var i,l,d,s,b,h,p,g,m;return i=c*((e+120)/360+n*o),p=ne(a[0]+u*o,r),h=0!==f?t[0]+o*f:t,l=h*p*(1-p)/2,s=x(i),m=Me(i),g=p+l*(-.14861*s+1.78277*m),b=p+l*(-.29227*s-.90649*m),d=p+l*(1.97294*s),y(w([255*g,255*b,255*d]))},o.start=function(n){return null==n?e:(e=n,o)},o.rotations=function(e){return null==e?n:(n=e,o)},o.gamma=function(e){return null==e?r:(r=e,o)},o.hue=function(e){return null==e?t:(t=e,"array"===ke(t)?0===(f=t[1]-t[0])&&(t=t[1]):f=0,o)},o.lightness=function(e){return null==e?a:("array"===ke(e)?(a=e,u=e[1]-e[0]):(a=[e,e],u=0),o)},o.scale=function(){return y.scale(o)},o.hue(t),o},y.random=function(){var n,t,r;for(t="0123456789abcdef",n="#",r=0;r<6;++r)n+=t.charAt(L(16*Math.random()));return new e(n)},d=[],E=function(e,n,t,r){var a,f,c,u;for(null==t&&(t=.5),null==r&&(r="rgb"),"object"!==ke(e)&&(e=y(e)),"object"!==ke(n)&&(n=y(n)),c=0,f=d.length;c<f;c++)if(a=d[c],r===a[0]){u=a[1](e,n,t,r);break}if(null==u)throw"color mode "+r+" is not supported";return u.alpha(e.alpha()+t*(n.alpha()-e.alpha()))},y.interpolate=E,e.prototype.interpolate=function(e,n,t){return E(this,e,n,t)},y.mix=E,e.prototype.mix=e.prototype.interpolate,l.rgb=function(){var e,n,t,r;n=Ne(arguments),t=[];for(e in n)r=n[e],t.push(r);return t},y.rgb=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["rgb"]),function(){})},e.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},e.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},o.push({p:3,test:function(e){var n;return n=Ne(arguments),"array"===ke(n)&&3===n.length?"rgb":4===n.length&&"number"===ke(n[3])&&n[3]>=0&&n[3]<=1?"rgb":void 0}}),l.lrgb=l.rgb,S=function(n,t,r,a){var f,c;return f=n._rgb,c=t._rgb,new e(xe(ne(f[0],2)*(1-r)+ne(c[0],2)*r),xe(ne(f[1],2)*(1-r)+ne(c[1],2)*r),xe(ne(f[2],2)*(1-r)+ne(c[2],2)*r),a)},u=function(n){var t,r,a,f,c,u;for(r=1/n.length,u=[0,0,0,0],f=0,a=n.length;f<a;f++)t=n[f],c=t._rgb,u[0]+=ne(c[0],2)*r,u[1]+=ne(c[1],2)*r,u[2]+=ne(c[2],2)*r,u[3]+=c[3]*r;return u[0]=xe(u[0]),u[1]=xe(u[1]),u[2]=xe(u[2]),new e(u)},d.push(["lrgb",S]),y.average=function(e,n){var t,a,f,c,o,i,l,d,s,h,p,g,m;if(null==n&&(n="rgb"),s=e.length,e=e.map(function(e){return y(e)}),l=e.splice(0,1)[0],"lrgb"===n)return u(e);g=l.get(n),c=[],o=0,i=0;for(d in g)g[d]=g[d]||0,c.push(isNaN(g[d])?0:1),"h"!==n.charAt(d)||isNaN(g[d])||(t=g[d]/180*r,o+=x(t),i+=Me(t));for(a=l.alpha(),p=0,h=e.length;p<h;p++){f=e[p],m=f.get(n),a+=f.alpha();for(d in g)isNaN(m[d])||(c[d]+=1,"h"===n.charAt(d)?(t=m[d]/180*r,o+=x(t),i+=Me(t)):g[d]+=m[d])}for(d in g)if("h"===n.charAt(d)){for(t=b(i/c[d],o/c[d])/r*180;t<0;)t+=360;for(;t>=360;)t-=360;g[d]=t}else g[d]=g[d]/c[d];return y(g,n).alpha(a/s)},j=function(e){var n,t,r,a,f,c;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),c=parseInt(e,16),a=c>>16,r=c>>8&255,t=255&c,[a,r,t,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),c=parseInt(e,16),a=c>>24&255,r=c>>16&255,t=c>>8&255,n=ye((255&c)/255*100)/100,[a,r,t,n];if(null!=l.css&&(f=l.css(e)))return f;throw"unknown color: "+e},fe=function(e,n){var t,r,a,f,c,u,o;return null==n&&(n="rgb"),c=e[0],a=e[1],r=e[2],t=e[3],c=Math.round(c),a=Math.round(a),r=Math.round(r),o=c<<16|a<<8|r,u="000000"+o.toString(16),u=u.substr(u.length-6),f="0"+ye(255*t).toString(16),f=f.substr(f.length-2),"#"+function(){switch(n.toLowerCase()){case"rgba":return u+f;case"argb":return f+u;default:return u}}()},l.hex=function(e){return j(e)},y.hex=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["hex"]),function(){})},e.prototype.hex=function(e){return null==e&&(e="rgb"),fe(this._rgb,e)},o.push({p:4,test:function(e){if(1===arguments.length&&"string"===ke(e))return"hex"}}),B=function(){var e,n,t,r,a,f,c,u,o,i,l,d,s,b;if(e=Ne(arguments),a=e[0],l=e[1],c=e[2],0===l)o=r=n=255*c;else{for(b=[0,0,0],t=[0,0,0],s=c<.5?c*(1+l):c+l-c*l,d=2*c-s,a/=360,b[0]=a+1/3,b[1]=a,b[2]=a-1/3,f=u=0;u<=2;f=++u)b[f]<0&&(b[f]+=1),b[f]>1&&(b[f]-=1),6*b[f]<1?t[f]=d+6*(s-d)*b[f]:2*b[f]<1?t[f]=s:3*b[f]<2?t[f]=d+(s-d)*(2/3-b[f])*6:t[f]=d;i=[ye(255*t[0]),ye(255*t[1]),ye(255*t[2])],o=i[0],r=i[1],n=i[2]}return e.length>3?[o,r,n,e[3]]:[o,r,n]},ue=function(e,n,t){var r,a,f,c,u;return void 0!==e&&e.length>=3&&(c=e,e=c[0],n=c[1],t=c[2]),e/=255,n/=255,t/=255,f=Math.min(e,n,t),K=Math.max(e,n,t),a=(K+f)/2,K===f?(u=0,r=Number.NaN):u=a<.5?(K-f)/(K+f):(K-f)/(2-K-f),e===K?r=(n-t)/(K-f):n===K?r=2+(t-e)/(K-f):t===K&&(r=4+(e-n)/(K-f)),r*=60,r<0&&(r+=360),[r,u,a]},y.hsl=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["hsl"]),function(){})},l.hsl=B,e.prototype.hsl=function(){return ue(this._rgb)},q=function(){var e,n,t,r,a,f,c,u,o,i,l,d,s,b,h,p,g,m;if(e=Ne(arguments),a=e[0],p=e[1],m=e[2],m*=255,0===p)o=r=n=m;else switch(360===a&&(a=0),a>360&&(a-=360),a<0&&(a+=360),a/=60,f=L(a),t=a-f,c=m*(1-p),u=m*(1-p*t),g=m*(1-p*(1-t)),f){case 0:i=[m,g,c],o=i[0],r=i[1],n=i[2];break;case 1:l=[u,m,c],o=l[0],r=l[1],n=l[2];break;case 2:d=[c,m,g],o=d[0],r=d[1],n=d[2];break;case 3:s=[c,u,m],o=s[0],r=s[1],n=s[2];break;case 4:b=[g,c,m],o=b[0],r=b[1],n=b[2];break;case 5:h=[m,c,u],o=h[0],r=h[1],n=h[2]}return[o,r,n,e.length>3?e[3]:1]},oe=function(){var e,n,t,r,a,f,c,u,o;return c=Ne(arguments),f=c[0],t=c[1],e=c[2],a=Math.min(f,t,e),K=Math.max(f,t,e),n=K-a,o=K/255,0===K?(r=Number.NaN,u=0):(u=n/K,f===K&&(r=(t-e)/n),t===K&&(r=2+(e-f)/n),e===K&&(r=4+(f-t)/n),(r*=60)<0&&(r+=360)),[r,u,o]},y.hsv=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["hsv"]),function(){})},l.hsv=q,e.prototype.hsv=function(){return oe(this._rgb)},J=function(e){var n,t,r;return"number"===ke(e)&&e>=0&&e<=16777215?(r=e>>16,t=e>>8&255,n=255&e,[r,t,n,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},se=function(){var e,n,t,r;return r=Ne(arguments),t=r[0],n=r[1],e=r[2],(t<<16)+(n<<8)+e},y.num=function(n){return new e(n,"num")},e.prototype.num=function(e){return null==e&&(e="rgb"),se(this._rgb,e)},l.num=J,o.push({p:1,test:function(e){if(1===arguments.length&&"number"===ke(e)&&e>=0&&e<=16777215)return"num"}}),A=function(){var e,n,t,r,a,f,c,u,o,i,l,d,s,b,h,p,g,m,v,y;if(t=Ne(arguments),u=t[0],a=t[1],n=t[2],a/=100,c=c/100*255,e=255*a,0===a)d=c=r=n;else switch(360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60,o=L(u),f=u-o,i=n*(1-a),l=i+e*(1-f),v=i+e*f,y=i+e,o){case 0:s=[y,v,i],d=s[0],c=s[1],r=s[2];break;case 1:b=[l,y,i],d=b[0],c=b[1],r=b[2];break;case 2:h=[i,y,v],d=h[0],c=h[1],r=h[2];break;case 3:p=[i,l,y],d=p[0],c=p[1],r=p[2];break;case 4:g=[v,i,y],d=g[0],c=g[1],r=g[2];break;case 5:m=[y,i,l],d=m[0],c=m[1],r=m[2]}return[d,c,r,t.length>3?t[3]:1]},ae=function(){var e,n,t,r,a,f,c,u,o;return o=Ne(arguments),u=o[0],a=o[1],n=o[2],c=Math.min(u,a,n),K=Math.max(u,a,n),r=K-c,t=100*r/255,e=c/(255-r)*100,0===r?f=Number.NaN:(u===K&&(f=(a-n)/r),a===K&&(f=2+(n-u)/r),n===K&&(f=4+(u-a)/r),(f*=60)<0&&(f+=360)),[f,t,e]},y.hcg=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["hcg"]),function(){})},l.hcg=A,e.prototype.hcg=function(){return ae(this._rgb)},_=function(e){var n,t,r,a,f,c,u,o;if(e=e.toLowerCase(),null!=y.colors&&y.colors[e])return j(y.colors[e]);if(f=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(u=f.slice(1,4),a=c=0;c<=2;a=++c)u[a]=+u[a];u[3]=1}else if(f=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(u=f.slice(1,5),a=o=0;o<=3;a=++o)u[a]=+u[a];else if(f=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(u=f.slice(1,4),a=n=0;n<=2;a=++n)u[a]=ye(2.55*u[a]);u[3]=1}else if(f=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(u=f.slice(1,5),a=t=0;t<=2;a=++t)u[a]=ye(2.55*u[a]);u[3]=+u[3]}else(f=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=f.slice(1,4),r[1]*=.01,r[2]*=.01,u=B(r),u[3]=1):(f=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=f.slice(1,4),r[1]*=.01,r[2]*=.01,u=B(r),u[3]=+f[4]);return u},re=function(e){var n;return n=e[3]<1?"rgba":"rgb","rgb"===n?n+"("+e.slice(0,3).map(ye).join(",")+")":"rgba"===n?n+"("+e.slice(0,3).map(ye).join(",")+","+e[3]+")":void 0},ge=function(e){return ye(100*e)/100},F=function(e,n){var t;return t=n<1?"hsla":"hsl",e[0]=ge(e[0]||0),e[1]=ge(100*e[1])+"%",e[2]=ge(100*e[2])+"%","hsla"===t&&(e[3]=n),t+"("+e.join(",")+")"},l.css=function(e){return _(e)},y.css=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["css"]),function(){})},e.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?re(this._rgb):"hsl"===e.slice(0,3)?F(this.hsl(),this.alpha()):void 0},l.named=function(e){return j(Oe[e])},o.push({p:5,test:function(e){if(1===arguments.length&&null!=Oe[e])return"named"}}),e.prototype.name=function(e){var n,t;arguments.length&&(Oe[e]&&(this._rgb=j(Oe[e])),this._rgb[3]=1),n=this.hex();for(t in Oe)if(n===Oe[t])return t;return n},T=function(){var e,t,r,a;return a=Ne(arguments),r=a[0],e=a[1],t=a[2],t*=n,[r,x(t)*e,Me(t)*e]},G=function(){var e,n,t,r,a,f,c,u,o,i,l;return t=Ne(arguments),u=t[0],a=t[1],c=t[2],i=T(u,a,c),e=i[0],n=i[1],r=i[2],l=$(e,n,r),o=l[0],f=l[1],r=l[2],[o,f,r,t.length>3?t[3]:1]},Y=function(){var e,n,t,r,a,c;return c=Ne(arguments),a=c[0],e=c[1],n=c[2],t=xe(e*e+n*n),r=(b(n,e)*f+360)%360,0===ye(1e4*t)&&(r=Number.NaN),[a,t,r]},le=function(){var e,n,t,r,a,f,c;return f=Ne(arguments),a=f[0],t=f[1],n=f[2],c=ie(a,t,n),r=c[0],e=c[1],n=c[2],Y(r,e,n)},y.lch=function(){var n;return n=Ne(arguments),new e(n,"lch")},y.hcl=function(){var n;return n=Ne(arguments),new e(n,"hcl")},l.lch=G,l.hcl=function(){var e,n,t,r;return r=Ne(arguments),n=r[0],e=r[1],t=r[2],G([t,e,n])},e.prototype.lch=function(){return le(this._rgb)},e.prototype.hcl=function(){return le(this._rgb).reverse()},te=function(e){var n,t,r,a,f,c,u,o,i;return null==e&&(e="rgb"),o=Ne(arguments),u=o[0],a=o[1],n=o[2],u/=255,a/=255,n/=255,f=1-Math.max(u,Math.max(a,n)),r=f<1?1/(1-f):0,t=(1-u-f)*r,c=(1-a-f)*r,i=(1-n-f)*r,[t,c,i,f]},M=function(){var e,n,t,r,a,f,c,u,o;return n=Ne(arguments),r=n[0],c=n[1],o=n[2],f=n[3],e=n.length>4?n[4]:1,1===f?[0,0,0,e]:(u=r>=1?0:255*(1-r)*(1-f),a=c>=1?0:255*(1-c)*(1-f),t=o>=1?0:255*(1-o)*(1-f),[u,a,t,e])},l.cmyk=function(){return M(Ne(arguments))},y.cmyk=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["cmyk"]),function(){})},e.prototype.cmyk=function(){return te(this._rgb)},l.gl=function(){var e,n,t,r,a;for(r=function(){var e,t;e=Ne(arguments),t=[];for(n in e)a=e[n],t.push(a);return t}.apply(this,arguments),e=t=0;t<=2;e=++t)r[e]*=255;return r},y.gl=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["gl"]),function(){})},e.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},de=function(e,n,t){var r;return r=Ne(arguments),e=r[0],n=r[1],t=r[2],e=Z(e),n=Z(n),t=Z(t),.2126*e+.7152*n+.0722*t},Z=function(e){return e/=255,e<=.03928?e/12.92:ne((e+.055)/1.055,2.4)},I=function(n,t,r,a){var f,c;return f=n._rgb,c=t._rgb,new e(f[0]+r*(c[0]-f[0]),f[1]+r*(c[1]-f[1]),f[2]+r*(c[2]-f[2]),a)},d.push(["rgb",I]),e.prototype.luminance=function(e,n){var t,r,a,f,c;return null==n&&(n="rgb"),arguments.length?(f=this._rgb,0===e?f=[0,0,0,this._rgb[3]]:1===e?f=[255,255,255,this[3]]:(t=de(this._rgb),r=1e-7,a=20,c=function(t,f){var u,o;return o=t.interpolate(f,.5,n),u=o.luminance(),Math.abs(e-u)<r||!a--?o:u>e?c(t,o):c(o,f)},f=t>e?c(y("black"),this).rgba():c(this,y("white")).rgba()),y(f).alpha(this.alpha())):de(this._rgb)},_e=function(e){var n,t,r,a;return a=e/100,a<66?(r=255,t=-155.25485562709179-.44596950469579133*(t=a-2)+104.49216199393888*V(t),n=a<20?0:.8274096064007395*(n=a-10)-254.76935184120902+115.67994401066147*V(n)):(r=351.97690566805693+.114206453784165*(r=a-55)-40.25366309332127*V(r),t=325.4494125711974+.07943456536662342*(t=a-50)-28.0852963507957*V(t),n=255),[r,t,n]},be=function(){var e,n,t,r,a,f,c,u;for(f=Ne(arguments),a=f[0],f[1],e=f[2],r=1e3,t=4e4,n=.4;t-r>n;)u=.5*(t+r),c=_e(u),c[2]/c[0]>=e/a?t=u:r=u;return ye(u)},y.temperature=y.kelvin=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["temperature"]),function(){})},l.temperature=l.kelvin=l.K=_e,e.prototype.temperature=function(){return be(this._rgb)},e.prototype.kelvin=e.prototype.temperature,y.contrast=function(n,t){var r,a,f,c;return"string"!==(f=ke(n))&&"number"!==f||(n=new e(n)),"string"!==(c=ke(t))&&"number"!==c||(t=new e(t)),r=n.luminance(),a=t.luminance(),r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)},y.distance=function(n,t,r){var a,f,c,u,o,i,l;null==r&&(r="lab"),"string"!==(o=ke(n))&&"number"!==o||(n=new e(n)),"string"!==(i=ke(t))&&"number"!==i||(t=new e(t)),c=n.get(r),u=t.get(r),l=0;for(f in c)a=(c[f]||0)-(u[f]||0),l+=a*a;return Math.sqrt(l)},y.deltaE=function(n,t,a,f){var c,u,o,i,l,d,h,p,g,m,v,y,w,M,_,k,N,O,L,A,j,P,F,B,q,E,R;for(null==a&&(a=1),null==f&&(f=1),"string"!==(N=ke(n))&&"number"!==N||(n=new e(n)),"string"!==(O=ke(t))&&"number"!==O||(t=new e(t)),L=n.lab(),c=L[0],o=L[1],l=L[2],A=t.lab(),u=A[0],i=A[1],d=A[2],h=xe(o*o+l*l),p=xe(i*i+d*d),F=c<16?.511:.040975*c/(1+.01765*c),j=.0638*h/(1+.0131*h)+.638,k=h<1e-6?0:180*b(l,o)/r;k<0;)k+=360;for(;k>=360;)k-=360;return B=k>=164&&k<=345?.56+s(.2*x(r*(k+168)/180)):.36+s(.4*x(r*(k+35)/180)),g=h*h*h*h,_=xe(g/(g+1900)),P=j*(_*B+1-_),M=c-u,w=h-p,v=o-i,y=l-d,m=v*v+y*y-w*w,q=M/(a*F),E=w/(f*j),R=P,xe(q*q+E*E+m/(R*R))},e.prototype.get=function(e){var n,t,r,a,f,c;return r=this,f=e.split("."),a=f[0],n=f[1],c=r[a](),n?(t=a.indexOf(n),t>-1?c[t]:console.warn("unknown channel "+n+" in mode "+a)):c},e.prototype.set=function(e,n){var t,r,a,f,c,u;if(a=this,c=e.split("."),f=c[0],t=c[1],t)if(u=a[f](),(r=f.indexOf(t))>-1)if("string"===ke(n))switch(n.charAt(0)){case"+":case"-":u[r]+=+n;break;case"*":u[r]*=+n.substr(1);break;case"/":u[r]/=+n.substr(1);break;default:u[r]=+n}else u[r]=n;else console.warn("unknown channel "+t+" in mode "+f);else u=n;return y(u,f).alpha(a.alpha())},e.prototype.clipped=function(){return this._rgb._clipped||!1},e.prototype.alpha=function(e){return arguments.length?y.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},e.prototype.darken=function(e){var n,r;return null==e&&(e=1),r=this,n=r.lab(),n[0]-=t.Kn*e,y.lab(n).alpha(r.alpha())},e.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},e.prototype.darker=e.prototype.darken,e.prototype.brighter=e.prototype.brighten,e.prototype.saturate=function(e){var n,r;return null==e&&(e=1),r=this,n=r.lch(),n[1]+=e*t.Kn,n[1]<0&&(n[1]=0),y.lch(n).alpha(r.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},e.prototype.premultiply=function(){var e,n;return n=this.rgb(),e=this.alpha(),y(n[0]*e,n[1]*e,n[2]*e,e)},p=function(e,n,t){if(!p[t])throw"unknown blend mode "+t;return p[t](e,n)},g=function(e){return function(n,t){var r,a;return r=y(t).rgb(),a=y(n).rgb(),y(e(r,a),"rgb")}},O=function(e){return function(n,t){var r,a,f;for(f=[],r=a=0;a<=3;r=++a)f[r]=e(n[r],t[r]);return f}},W=function(e,n){return e},Q=function(e,n){return e*n/255},k=function(e,n){return e>n?n:e},D=function(e,n){return e>n?e:n},we=function(e,n){return 255*(1-(1-e/255)*(1-n/255))},ee=function(e,n){return n<128?2*e*n/255:255*(1-2*(1-e/255)*(1-n/255))},v=function(e,n){return 255*(1-(1-n/255)/(e/255))},N=function(e,n){return 255===e?255:(e=n/255*255/(1-e/255),e>255?255:e)},p.normal=g(O(W)),p.multiply=g(O(Q)),p.screen=g(O(we)),p.overlay=g(O(ee)),p.darken=g(O(k)),p.lighten=g(O(D)),p.dodge=g(O(N)),p.burn=g(O(v)),y.blend=p,y.analyze=function(e){var n,t,r,a;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},t=0,n=e.length;t<n;t++)null==(a=e[t])||isNaN(a)||(r.values.push(a),r.sum+=a,a<r.min&&(r.min=a),a>r.max&&(r.max=a),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,n){return y.limits(r,e,n)},r},y.scale=function(e,n){var t,r,a,f,c,u,o,i,l,d,s,b,h,p,g,m,v,w,M,x,_;return l="rgb",d=y("#ccc"),p=0,!1,c=[0,1],h=[],b=[0,0],t=!1,a=[],s=!1,i=0,o=1,f=!1,r={},g=!0,u=1,x=function(e){var n,t,r,f,c,u;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===ke(e)&&null!=y.brewer&&(e=y.brewer[e]||y.brewer[e.toLowerCase()]||e),"array"===ke(e)){for(e=e.slice(0),n=r=0,f=e.length-1;0<=f?r<=f:r>=f;n=0<=f?++r:--r)t=e[n],"string"===ke(t)&&(e[n]=y(t));for(h.length=0,n=u=0,c=e.length-1;0<=c?u<=c:u>=c;n=0<=c?++u:--u)h.push(n/(e.length-1))}return M(),a=e},v=function(e){var n,r;if(null!=t){for(r=t.length-1,n=0;n<r&&e>=t[n];)n++;return n-1}return 0},_=function(e){return e},function(e){var n,r,a,f,c;return c=e,t.length>2&&(f=t.length-1,n=v(e),a=t[0]+(t[1]-t[0])*(0+.5*p),r=t[f-1]+(t[f]-t[f-1])*(1-.5*p),c=i+(t[n]+.5*(t[n+1]-t[n])-a)/(r-a)*(o-i)),c},w=function(e,n){var f,c,s,p,m,w,M,x;if(null==n&&(n=!1),isNaN(e))return d;if(n?x=e:t&&t.length>2?(f=v(e),x=f/(t.length-2)):x=o!==i?(e-i)/(o-i):1,n||(x=_(x)),1!==u&&(x=ne(x,u)),x=b[0]+x*(1-b[0]-b[1]),x=Math.min(1,Math.max(0,x)),p=Math.floor(1e4*x),g&&r[p])c=r[p];else{if("array"===ke(a))for(s=m=0,M=h.length-1;0<=M?m<=M:m>=M;s=0<=M?++m:--m){if(w=h[s],x<=w){c=a[s];break}if(x>=w&&s===h.length-1){c=a[s];break}if(x>w&&x<h[s+1]){x=(x-w)/(h[s+1]-w),c=y.interpolate(a[s],a[s+1],x,l);break}}else"function"===ke(a)&&(c=a(x));g&&(r[p]=c)}return c},M=function(){return r={}},x(e),m=function(e){var n;return n=y(w(e)),s&&n[s]?n[s]():n},m.classes=function(e){var n;return null!=e?("array"===ke(e)?(t=e,c=[e[0],e[e.length-1]]):(n=y.analyze(c),t=0===e?[n.min,n.max]:y.limits(n,"e",e)),m):t},m.domain=function(e){var n,t,r,f,u,l,d;if(!arguments.length)return c;if(i=e[0],o=e[e.length-1],h=[],r=a.length,e.length===r&&i!==o)for(u=0,f=e.length;u<f;u++)t=e[u],h.push((t-i)/(o-i));else for(n=d=0,l=r-1;0<=l?d<=l:d>=l;n=0<=l?++d:--d)h.push(n/(r-1));return c=[i,o],m},m.mode=function(e){return arguments.length?(l=e,M(),m):l},m.range=function(e,n){return x(e,n),m},m.out=function(e){return s=e,m},m.spread=function(e){return arguments.length?(p=e,m):p},m.correctLightness=function(e){return null==e&&(e=!0),f=e,M(),_=f?function(e){var n,t,r,a,f,c,u,o,i;for(n=w(0,!0).lab()[0],t=w(1,!0).lab()[0],u=n>t,r=w(e,!0).lab()[0],f=n+(t-n)*e,a=r-f,o=0,i=1,c=20;Math.abs(a)>.01&&c-- >0;)!function(){u&&(a*=-1),a<0?(o=e,e+=.5*(i-e)):(i=e,e+=.5*(o-e)),r=w(e,!0).lab()[0],a=r-f}();return e}:function(e){return e},m},m.padding=function(e){return null!=e?("number"===ke(e)&&(e=[e,e]),b=e,m):b},m.colors=function(n,r){var f,u,o,i,l,d,s,b;if(arguments.length<2&&(r="hex"),l=[],0===arguments.length)l=a.slice(0);else if(1===n)l=[m(.5)];else if(n>1)u=c[0],f=c[1]-u,l=function(){d=[];for(var e=0;0<=n?e<n:e>n;0<=n?e++:e--)d.push(e);return d}.apply(this).map(function(e){return m(u+e/(n-1)*f)});else{if(e=[],s=[],t&&t.length>2)for(o=b=1,i=t.length;1<=i?b<i:b>i;o=1<=i?++b:--b)s.push(.5*(t[o-1]+t[o]));else s=c;l=s.map(function(e){return m(e)})}return y[r]&&(l=l.map(function(e){return e[r]()})),l},m.cache=function(e){return null!=e?(g=e,m):g},m.gamma=function(e){return null!=e?(u=e,m):u},m},null==y.scales&&(y.scales={}),y.scales.cool=function(){return y.scale([y.hsl(180,1,.9),y.hsl(250,.7,.4)])},y.scales.hot=function(){return y.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},y.analyze=function(e,n,t){var r,a,f,c,u,o,i;if(u={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==t&&(t=function(){return!0}),r=function(e){null==e||isNaN(e)||(u.values.push(e),u.sum+=e,e<u.min&&(u.min=e),e>u.max&&(u.max=e),u.count+=1)},i=function(e,a){if(t(e,a))return r(null!=n&&"function"===ke(n)?n(e):null!=n&&"string"===ke(n)||"number"===ke(n)?e[n]:e)},"array"===ke(e))for(c=0,f=e.length;c<f;c++)o=e[c],i(o);else for(a in e)o=e[a],i(o,a);return u.domain=[u.min,u.max],u.limits=function(e,n){return y.limits(u,e,n)},u},y.limits=function(e,n,t){var r,a,f,c,u,o,i,l,d,b,h,p,g,m,v,w,M,x,_,k,N,O,A,j,P,F,B,q,E,R,C,S,z,I,Y,$,X,T,G,D,U,Z,H,Q,W,J,ee,te,re,ae,fe,ce,ue,oe,ie;if(null==n&&(n="equal"),null==t&&(t=7),"array"===ke(e)&&(e=y.analyze(e)),P=e.min,K=e.max,e.sum,oe=e.values.sort(function(e,n){return e-n}),1===t)return[P,K];if(A=[],"c"===n.substr(0,1)&&(A.push(P),A.push(K)),"e"===n.substr(0,1)){for(A.push(P),k=C=1,Y=t-1;1<=Y?C<=Y:C>=Y;k=1<=Y?++C:--C)A.push(P+k/t*(K-P));A.push(K)}else if("l"===n.substr(0,1)){if(P<=0)throw"Logarithmic scales are only possible for values > 0";for(F=Math.LOG10E*V(P),j=Math.LOG10E*V(K),A.push(P),k=ie=1,$=t-1;1<=$?ie<=$:ie>=$;k=1<=$?++ie:--ie)A.push(ne(10,F+k/t*(j-F)));A.push(K)}else if("q"===n.substr(0,1)){for(A.push(P),k=r=1,Z=t-1;1<=Z?r<=Z:r>=Z;k=1<=Z?++r:--r)S=(oe.length-1)*k/t,z=L(S),z===S?A.push(oe[z]):(I=S-z,A.push(oe[z]*(1-I)+oe[z+1]*I));A.push(K)}else if("k"===n.substr(0,1)){for(q=oe.length,m=new Array(q),x=new Array(t),ae=!0,E=0,w=null,w=[],w.push(P),k=a=1,H=t-1;1<=H?a<=H:a>=H;k=1<=H?++a:--a)w.push(P+k/t*(K-P));for(w.push(K);ae;){for(N=f=0,Q=t-1;0<=Q?f<=Q:f>=Q;N=0<=Q?++f:--f)x[N]=0;for(k=c=0,W=q-1;0<=W?c<=W:c>=W;k=0<=W?++c:--c){for(ue=oe[k],B=Number.MAX_VALUE,N=u=0,J=t-1;0<=J?u<=J:u>=J;N=0<=J?++u:--u)(_=s(w[N]-ue))<B&&(B=_,v=N);x[v]++,m[k]=v}for(R=new Array(t),N=o=0,ee=t-1;0<=ee?o<=ee:o>=ee;N=0<=ee?++o:--o)R[N]=null;for(k=i=0,te=q-1;0<=te?i<=te:i>=te;k=0<=te?++i:--i)M=m[k],null===R[M]?R[M]=oe[k]:R[M]+=oe[k];for(N=l=0,re=t-1;0<=re?l<=re:l>=re;N=0<=re?++l:--l)R[N]*=1/x[N];for(ae=!1,N=d=0,X=t-1;0<=X?d<=X:d>=X;N=0<=X?++d:--d)if(R[N]!==w[k]){ae=!0;break}w=R,E++,E>200&&(ae=!1)}for(O={},N=b=0,T=t-1;0<=T?b<=T:b>=T;N=0<=T?++b:--b)O[N]=[];for(k=h=0,G=q-1;0<=G?h<=G:h>=G;k=0<=G?++h:--h)M=m[k],O[M].push(oe[k]);for(fe=[],N=p=0,D=t-1;0<=D?p<=D:p>=D;N=0<=D?++p:--p)fe.push(O[N][0]),fe.push(O[N][O[N].length-1]);for(fe=fe.sort(function(e,n){return e-n}),A.push(fe[0]),k=g=1,U=fe.length-1;g<=U;k=g+=2)ce=fe[k],isNaN(ce)||-1!==A.indexOf(ce)||A.push(ce)}return A},P=function(e,n,t){var r,f,u,o;return r=Ne(arguments),e=r[0],n=r[1],t=r[2],isNaN(e)&&(e=0),e/=360,e<1/3?(f=(1-n)/3,o=(1+n*x(c*e)/x(a-c*e))/3,u=1-(f+o)):e<2/3?(e-=1/3,o=(1-n)/3,u=(1+n*x(c*e)/x(a-c*e))/3,f=1-(o+u)):(e-=2/3,u=(1-n)/3,f=(1+n*x(c*e)/x(a-c*e))/3,o=1-(u+f)),o=U(t*o*3),u=U(t*u*3),f=U(t*f*3),[255*o,255*u,255*f,r.length>3?r[3]:1]},ce=function(){var e,n,t,r,a,f,u,o;return u=Ne(arguments),f=u[0],n=u[1],e=u[2],c=2*Math.PI,f/=255,n/=255,e/=255,a=Math.min(f,n,e),r=(f+n+e)/3,o=1-a/r,0===o?t=0:(t=(f-n+(f-e))/2,t/=Math.sqrt((f-n)*(f-n)+(f-e)*(n-e)),t=Math.acos(t),e>n&&(t=c-t),t/=c),[360*t,o,r]},y.hsi=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,je.call(arguments).concat(["hsi"]),function(){})},l.hsi=P,e.prototype.hsi=function(){return ce(this._rgb)},R=function(e,n,t,r){var a,f,c,u,o,i,l,d,s,b,h,p;return"hsl"===r?(h=e.hsl(),p=n.hsl()):"hsv"===r?(h=e.hsv(),p=n.hsv()):"hcg"===r?(h=e.hcg(),p=n.hcg()):"hsi"===r?(h=e.hsi(),p=n.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",h=e.hcl(),p=n.hcl()),"h"===r.substr(0,1)&&(c=h[0],s=h[1],i=h[2],u=p[0],b=p[1],l=p[2]),isNaN(c)||isNaN(u)?isNaN(c)?isNaN(u)?f=Number.NaN:(f=u,1!==i&&0!==i||"hsv"===r||(d=b)):(f=c,1!==l&&0!==l||"hsv"===r||(d=s)):(a=u>c&&u-c>180?u-(c+360):u<c&&c-u>180?u+360-c:u-c,f=c+t*a),null==d&&(d=s+t*(b-s)),o=i+t*(l-i),y[r](f,d,o)},d=d.concat(function(){var e,n,t,r;for(t=["hsv","hsl","hsi","hcl","lch","hcg"],r=[],n=0,e=t.length;n<e;n++)H=t[n],r.push([H,R]);return r}()),z=function(e,n,t,r){var a,f;return a=e.num(),f=n.num(),y.num(a+(f-a)*t,"num")},d.push(["num",z]),C=function(n,t,r,a){var f,c;return f=n.lab(),c=t.lab(),new e(f[0]+r*(c[0]-f[0]),f[1]+r*(c[1]-f[1]),f[2]+r*(c[2]-f[2]),a)},d.push(["lab",C])}.call(this),function(){function e(e){this._value=e}function n(e,n,t,r){var a,f,c,u,o=e.toString().split("."),i=n-(r||0);return a=2===o.length?Math.min(Math.max(o[1].length,i),n):i,c=Math.pow(10,a),u=(t(e*c)/c).toFixed(a),r>n-a&&(f=new RegExp("\\.?0{1,"+(r-(n-a))+"}$"),u=u.replace(f,"")),u}function t(e,n,t){return 0===e._value&&null!==m.zeroFormat?m.zeroFormat:null===e._value&&null!==m.nullFormat?m.nullFormat:n.indexOf("$")>-1?r(e,n,t):n.indexOf("%")>-1?a(e,n,t):n.indexOf(":")>-1?u(e):n.indexOf("b")>-1||n.indexOf("ib")>-1?f(e,n,t):n.indexOf("o")>-1?c(e,n,t):o(e._value,n,t)}function r(e,n,t){var r,a,f=n.indexOf("$"),c=n.indexOf("("),u=n.indexOf("-"),i="";return n.indexOf(" $")>-1?(i=" ",n=n.replace(" $","")):n.indexOf("$ ")>-1?(i=" ",n=n.replace("$ ","")):n=n.replace("$",""),a=o(e._value,n,t),1>=f?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),r=1,(c>f||u>f)&&(r=0),a.splice(r,0,p[m.currentLanguage].currency.symbol+i),a=a.join("")):a=p[m.currentLanguage].currency.symbol+i+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,i+p[m.currentLanguage].currency.symbol),a=a.join("")):a=a+i+p[m.currentLanguage].currency.symbol,a}function a(e,n,t){var r,a="",f=100*e._value;return n.indexOf(" %")>-1?(a=" ",n=n.replace(" %","")):n=n.replace("%",""),r=o(f,n,t),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,a+"%"),r=r.join("")):r=r+a+"%",r}function f(e,n,t){var r,a,f,c=n.indexOf("ib")>-1?v.iec:v.bytes,u=e._value,i="";for(n.indexOf(" b")>-1||n.indexOf(" ib")>-1?(i=" ",n=n.replace(" ib","").replace(" b","")):n=n.replace("ib","").replace("b",""),r=0;r<=c.length;r++)if(a=Math.pow(1024,r),f=Math.pow(1024,r+1),null===u||0===u||u>=a&&f>u){i+=c[r],a>0&&(u/=a);break}return o(u,n,t)+i}function c(e,n,t){var r="";return n.indexOf(" o")>-1?(r=" ",n=n.replace(" o","")):n=n.replace("o",""),r+=p[m.currentLanguage].ordinal(e._value),o(e._value,n,t)+r}function u(e){var n=Math.floor(e._value/60/60),t=Math.floor((e._value-60*n*60)/60),r=Math.round(e._value-60*n*60-60*t);return n+":"+(10>t?"0"+t:t)+":"+(10>r?"0"+r:r)}function o(e,t,r){var a,f,c,u,o=!1,i=!1,l=!1,d="",s=!1,b=!1,h=!1,g=!1,v=!1,y="",w=!1;return null===e&&(e=0),a=Math.abs(e),t.indexOf("(")>-1?(o=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(i=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(s=t.indexOf("aK")>=0,b=t.indexOf("aM")>=0,h=t.indexOf("aB")>=0,g=t.indexOf("aT")>=0,v=s||b||h||g,t.indexOf(" a")>-1&&(d=" "),t=t.replace(new RegExp(d+"a[KMBT]?"),""),a>=Math.pow(10,12)&&!v||g?(d+=p[m.currentLanguage].abbreviations.trillion,e/=Math.pow(10,12)):a<Math.pow(10,12)&&a>=Math.pow(10,9)&&!v||h?(d+=p[m.currentLanguage].abbreviations.billion,e/=Math.pow(10,9)):a<Math.pow(10,9)&&a>=Math.pow(10,6)&&!v||b?(d+=p[m.currentLanguage].abbreviations.million,e/=Math.pow(10,6)):(a<Math.pow(10,6)&&a>=Math.pow(10,3)&&!v||s)&&(d+=p[m.currentLanguage].abbreviations.thousand,e/=Math.pow(10,3))),
t.indexOf("[.]")>-1&&(l=!0,t=t.replace("[.]",".")),f=e.toString().split(".")[0],c=t.split(".")[1],u=t.indexOf(","),c?(c.indexOf("[")>-1?(c=c.replace("]",""),c=c.split("["),y=n(e,c[0].length+c[1].length,r,c[1].length)):y=n(e,c.length,r),f=y.split(".")[0],y=y.indexOf(".")>-1?p[m.currentLanguage].delimiters.decimal+y.split(".")[1]:"",l&&0===Number(y.slice(1))&&(y="")):f=n(e,null,r),f.indexOf("-")>-1&&(f=f.slice(1),w=!0),u>-1&&(f=f.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p[m.currentLanguage].delimiters.thousands)),0===t.indexOf(".")&&(f=""),(o&&w?"(":"")+(!o&&w?"-":"")+(!w&&i?"+":"")+f+y+(d||"")+(o&&w?")":"")}function i(e,n){var t,r,a,f,c,u,o=n,i=!1;if(n.indexOf(":")>-1)u=l(n);else if(n===m.zeroFormat||n===m.nullFormat)u=0;else{for("."!==p[m.currentLanguage].delimiters.decimal&&(n=n.replace(/\./g,"").replace(p[m.currentLanguage].delimiters.decimal,".")),t=new RegExp("[^a-zA-Z]"+p[m.currentLanguage].abbreviations.thousand+"(?:\\)|(\\"+p[m.currentLanguage].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+p[m.currentLanguage].abbreviations.million+"(?:\\)|(\\"+p[m.currentLanguage].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+p[m.currentLanguage].abbreviations.billion+"(?:\\)|(\\"+p[m.currentLanguage].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+p[m.currentLanguage].abbreviations.trillion+"(?:\\)|(\\"+p[m.currentLanguage].currency.symbol+")?(?:\\))?)?$"),c=1;c<=v.bytes.length&&!(i=(n.indexOf(v.bytes[c])>-1||n.indexOf(v.iec[c])>-1)&&Math.pow(1024,c));c++);u=i||1,u*=o.match(t)?Math.pow(10,3):1,u*=o.match(r)?Math.pow(10,6):1,u*=o.match(a)?Math.pow(10,9):1,u*=o.match(f)?Math.pow(10,12):1,u*=n.indexOf("%")>-1?.01:1,u*=(n.split("-").length+Math.min(n.split("(").length-1,n.split(")").length-1))%2?1:-1,u*=Number(n.replace(/[^0-9\.]+/g,"")),u=i?Math.ceil(u):u}return e._value=u,e._value}function l(e){var n=e.split(":"),t=0;return 3===n.length?(t+=60*Number(n[0])*60,t+=60*Number(n[1]),t+=Number(n[2])):2===n.length&&(t+=60*Number(n[0]),t+=Number(n[1])),Number(t)}function d(e,n){p[e]=n}function s(e){var n=e.toString().split(".");return n.length<2?1:Math.pow(10,n[1].length)}function b(){return Array.prototype.slice.call(arguments).reduce(function(e,n){var t=s(e),r=s(n);return t>r?t:r},-1/0)}var h,p={},g={currentLanguage:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0"},m={currentLanguage:g.currentLanguage,zeroFormat:g.zeroFormat,nullFormat:g.nullFormat,defaultFormat:g.defaultFormat},v={bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],iec:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]};h=function(n){return n=h.isNumeral(n)?n.value():0===n||void 0===n?0:null===n?null:Number(n)?Number(n):h.fn.unformat(n),new e(n)},h.version="1.5.5",h.isNumeral=function(n){return n instanceof e},h.language=function(e,n){if(!e)return m.currentLanguage;if((e=e.toLowerCase())&&!n){if(!p[e])throw new Error("Unknown language : "+e);m.currentLanguage=e}return(n||!p[e])&&d(e,n),h},h.reset=function(){for(var e in g)m[e]=g[e]},h.languageData=function(e){if(!e)return p[m.currentLanguage];if(!p[e])throw new Error("Unknown language : "+e);return p[e]},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var n=e%10;return 1==~~(e%100/10)?"th":1===n?"st":2===n?"nd":3===n?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(e){m.zeroFormat="string"==typeof e?e:null},h.nullFormat=function(e){m.nullFormat="string"==typeof e?e:null},h.defaultFormat=function(e){m.defaultFormat="string"==typeof e?e:"0.0"},h.validate=function(e,n){var t,r,a,f,c,u,o,i;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),e=e.trim(),e.match(/^\d+$/))return!0;if(""===e)return!1;try{o=h.languageData(n)}catch(e){o=h.languageData(h.language())}return a=o.currency.symbol,c=o.abbreviations,t=o.delimiters.decimal,r="."===o.delimiters.thousands?"\\.":o.delimiters.thousands,(null===(i=e.match(/^[^\d]+/))||(e=e.substr(1),i[0]===a))&&((null===(i=e.match(/[^\d]+$/))||(e=e.slice(0,-1),i[0]===c.thousand||i[0]===c.million||i[0]===c.billion||i[0]===c.trillion))&&(u=new RegExp(r+"{2}"),!e.match(/[^\d.,]/g)&&(f=e.split(t),!(f.length>2)&&(f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(u):1===f[0].length?!!f[0].match(/^\d+$/)&&!f[0].match(u)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(u)&&!!f[1].match(/^\d+$/)))))},Array.prototype.reduce||(Array.prototype.reduce=function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,t=Object(this),r=t.length>>>0,a=0;if(2===arguments.length)n=arguments[1];else{for(;r>a&&!(a in t);)a++;if(a>=r)throw new TypeError("Reduce of empty array with no initial value");n=t[a++]}for(;r>a;a++)a in t&&(n=e(n,t[a],a,t));return n}),h.fn=e.prototype={clone:function(){return h(this)},format:function(e,n){return t(this,e||m.defaultFormat,void 0!==n?n:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:i(this,e||m.defaultFormat)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function n(e,n,r,a){return e+t*n}var t=b.call(null,this._value,e);return this._value=[this._value,e].reduce(n,0)/t,this},subtract:function(e){function n(e,n,r,a){return e-t*n}var t=b.call(null,this._value,e);return this._value=[e].reduce(n,this._value*t)/t,this},multiply:function(e){function n(e,n,t,r){var a=b(e,n);return e*a*(n*a)/(a*a)}return this._value=[this._value,e].reduce(n,1),this},divide:function(e){function n(e,n,t,r){var a=b(e,n);return e*a/(n*a)}return this._value=[this._value,e].reduce(n),this},difference:function(e){return Math.abs(h(this._value).subtract(e).value())}},"undefined"!=typeof module&&module.exports&&(module.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define([],function(){return h})}.call(this),L.BubbleLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(e,n){if(console.log("initalized: ",n,e),this._geojson=e,this._legend=null,n.max_radius=n.hasOwnProperty("max_radius")?n.max_radius:35,n.legend=!n.hasOwnProperty("legend")||n.legend,n.tooltip=!n.hasOwnProperty("tooltip")||n.tooltip,n.scale=!!n.hasOwnProperty("scale")&&n.scale,n.style=n.hasOwnProperty("style")?n.style:{radius:10,fillColor:"#74acb8",color:"#555",weight:1,opacity:.5,fillOpacity:.5},L.setOptions(this,n),!this._hasRequiredProp(this.options.property))throw"Error: you must provide an amount property that is include in every GeoJSON feature"},addTo:function(e){return e.addLayer(this),this},onAdd:function(e){this._map=e;var n=this.createLayer();this._layer=n,e.addLayer(n),this.options.tooltip&&this.showTooltip(n),this.options.legend&&this.showLegend(this._scale,this._max)},createLayer:function(e){var n=this._getMax(this._geojson),t=3*Math.PI*3,r=Math.PI*this.options.max_radius*this.options.max_radius,a=d3_scale.scaleLinear().domain([0,n]).range([t,r]),f=d3_scale.scaleLinear().domain([0,n]).range([0,1]);this._scale=a,this._normal=f,this._max=n;var c=this.options.property,u=this.options.style,o=!1;return this.options.scale&&(o=chroma.scale(this.options.scale)),new L.geoJson(this._geojson,{pointToLayer:function(e,n){var t=e.properties[c],r=a(t),i=Math.sqrt(r/Math.PI);return u.radius=i,o&&(u.fillColor=o(f(t))),u.color=chroma(u.fillColor).darken().hex(),L.circleMarker(n,u)}})},onRemove:function(e){this._map=e,e.removeLayer(this._layer),null!==this._legend&&e.removeControl(this._legend)},showLegend:function(e,n){var t=L.control({position:"bottomright"});this._legend=t;var r=this.options.max_radius,a=this.options.style.fillColor,f=!1,c=this.options.style.opacity,u=d3_scale.scaleLinear().domain([0,n]).range([0,1]);this.options.scale&&(f=chroma.scale(this.options.scale)),t.onAdd=function(t){var o=L.DomUtil.create("div","info legend");o.innerHTML+="<strong>"+bubbles.options.property+"</strong><br/>",o.style="background-color: #FFF; padding: 8px; font-size: 14px; text-transform: capitalize";for(var i=3;i>0;i--){var l=e(n/i/2),d=Math.sqrt(l/Math.PI),s=L.DomUtil.create("div","bubble");f&&(a=f(u(n/i))),s.innerHTML='<svg height="'+2*r+'" width="'+(2*r-r/2)+'"><circle cx="'+(d+1)+'" cy="'+r+'" r="'+d+'" stroke="'+chroma(a).darken().hex()+'" stroke-width="1" opacity="'+c+'" fill="'+a+'" /><text font-size="11" text-anchor="middle" x="'+d+'" y="'+2*r+'" fill="#AAA">'+numeral(n/i).format("0 a"),s.style="float:left; width: "+d+";",o.appendChild(s)}return o},t.addTo(map)},showTooltip:function(e){e.on("mouseover",function(e){var n="",t=e.layer.feature.properties;for(var r in t)t.hasOwnProperty(r)&&(n+="<strong>"+r+"</strong>: "+t[r]+"</br>");e.layer.bindPopup(n),e.layer.openPopup()}),e.on("mouseout",function(e){e.layer.closePopup()})},_getMax:function(e){for(var n=0,t=this._geojson.features,r=this.options.property,a=0;a<t.length;a++)t[a].properties[r]>n&&(n=t[a].properties[r]);return n},_hasRequiredProp:function(e){for(var n=!0,t=this._geojson.features,r=0;r<t.length;r++)!0!==t[r].properties.hasOwnProperty(e)&&(n=!1);return n}}),L.bubbleLayer=function(e,n){return new L.BubbleLayer(e,n)};